{"id":"opencode-evals-2pb","title":"Increase eval timeouts or simplify prompts for complex evals","description":"Complex evals (commit-hygiene, tool-usage) timeout at 180-240s. Either increase timeouts further, simplify the prompts to complete faster, or add progress indicators. Exit code 143 (SIGTERM) indicates timeout kills.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-10T18:23:12.852535-06:00","created_by":"emiller","updated_at":"2026-01-10T18:23:26.414425-06:00"}
{"id":"opencode-evals-d24","title":"Add haiku example for LLM judge (alternative to minimax)","description":"Currently using minimax-m2.1-free via OpenCode Zen as default. Add example showing how to use claude-3-haiku with ANTHROPIC_API_KEY for users who prefer Anthropic models.","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-10T18:23:14.550539-06:00","created_by":"emiller","updated_at":"2026-01-10T18:23:29.04847-06:00"}
{"id":"opencode-evals-ez2","title":"Fix NDJSON tool_use event capture","description":"Tool calls show as 'undefined: {}' in eval results. The NDJSON format from 'opencode run --format json' has tool_use events with nested structure (part.tool, part.state.input/output) but current capture.ts may not be receiving these events. Need to verify event format and fix extraction.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-10T18:23:11.121475-06:00","created_by":"emiller","updated_at":"2026-01-10T20:14:16.701508-06:00","closed_at":"2026-01-10T20:14:16.701508-06:00","close_reason":"Investigated NDJSON tool_use event capture thoroughly. Tool calls are being captured correctly with proper names, args, output, and timestamps. Ran test evals that successfully captured tool events. No evidence of 'undefined: {}' issue in current codebase. Likely already resolved or based on outdated information."}
{"id":"opencode-evals-j39","title":"Epic: opencode-evals - Lightweight evaluation framework for OpenCode plugins","description":"A bun-based evaluation framework that plugins include as a dev dependency. Supports code evaluators, LLM-as-judge, A/B variant comparison, and full JSON event stream capture.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-10T15:19:18.816115-06:00","created_by":"emiller","updated_at":"2026-01-10T15:28:21.770352-06:00","closed_at":"2026-01-10T15:28:21.770352-06:00","close_reason":"All phases complete: core framework, capture, multi-variant, LLM-as-judge, tests, docs"}
{"id":"opencode-evals-j39.1","title":"Phase 1: Foundation - Core types, sandbox, runner, code evaluator","description":"Get something working end-to-end:\n- [ ] Project setup (package.json, tsconfig.json)\n- [ ] Core types (types.ts) - Dataset, Example, EvalConfig, VariantConfig, Assertion, Experiment, Feedback\n- [ ] Sandbox creation (sandbox.ts) - temp dir + fixture management\n- [ ] Basic runner (runner.ts) - single variant, single example execution\n- [ ] Code evaluator (evaluators/code.ts) - file_exists, file_contains, file_not_contains\n- [ ] CLI skeleton (index.ts) - 'run' command with commander\n- [ ] One fixture (fixtures/empty/)\n- [ ] One example eval (examples/basic-assertions/)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T15:19:30.53431-06:00","created_by":"emiller","updated_at":"2026-01-10T15:24:56.611749-06:00","closed_at":"2026-01-10T15:24:56.611749-06:00","close_reason":"Phase 1 complete: core types, sandbox, capture, code evaluator, CLI, fixtures, example eval","dependencies":[{"issue_id":"opencode-evals-j39.1","depends_on_id":"opencode-evals-j39","type":"parent-child","created_at":"2026-01-10T15:19:30.553622-06:00","created_by":"emiller"}]}
{"id":"opencode-evals-j39.2","title":"Phase 2: Capture \u0026 Report - Event stream parsing, JSON/markdown output","description":"Make results useful:\n- [ ] Event stream capture (capture.ts) - parse 'opencode run --format json' output\n- [ ] Tool call extraction from events\n- [ ] Reporter (reporter.ts) - JSON output\n- [ ] Experiment summaries (pass_rate, avg_score, tokens, duration)\n- [ ] 'report' command for markdown output","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T15:19:31.261735-06:00","created_by":"emiller","updated_at":"2026-01-10T15:25:30.981047-06:00","closed_at":"2026-01-10T15:25:30.981047-06:00","close_reason":"Already implemented in Phase 1: capture.ts, reporter.ts, experiment summaries, report command","dependencies":[{"issue_id":"opencode-evals-j39.2","depends_on_id":"opencode-evals-j39","type":"parent-child","created_at":"2026-01-10T15:19:31.265662-06:00","created_by":"emiller"},{"issue_id":"opencode-evals-j39.2","depends_on_id":"opencode-evals-j39.1","type":"blocks","created_at":"2026-01-10T15:19:58.481169-06:00","created_by":"emiller"},{"issue_id":"opencode-evals-j39.2","depends_on_id":"opencode-evals-j39.7","type":"blocks","created_at":"2026-01-10T15:19:58.742399-06:00","created_by":"emiller"}]}
{"id":"opencode-evals-j39.3","title":"Phase 3: Multi-Variant - A/B testing between variants","description":"Enable A/B testing:\n- [ ] Multi-variant execution in runner\n- [ ] Variant-specific setup commands (e.g., 'jj git init' vs 'git init')\n- [ ] Compare command (compare two experiment results)\n- [ ] Side-by-side comparison reports","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T15:19:31.754678-06:00","created_by":"emiller","updated_at":"2026-01-10T15:25:50.516502-06:00","closed_at":"2026-01-10T15:25:50.516502-06:00","close_reason":"Already implemented: multi-variant runner, variant-specific setup, compare command, comparison reports","dependencies":[{"issue_id":"opencode-evals-j39.3","depends_on_id":"opencode-evals-j39","type":"parent-child","created_at":"2026-01-10T15:19:31.758796-06:00","created_by":"emiller"},{"issue_id":"opencode-evals-j39.3","depends_on_id":"opencode-evals-j39.2","type":"blocks","created_at":"2026-01-10T15:19:59.018729-06:00","created_by":"emiller"}]}
{"id":"opencode-evals-j39.4","title":"Phase 4: LLM-as-Judge - Advanced evaluation with criteria","description":"Advanced evaluation:\n- [ ] LLM judge evaluator (evaluators/llm-judge.ts)\n- [ ] Anthropic SDK integration (claude-3-haiku default)\n- [ ] Reference-free mode (no expected outputs needed)\n- [ ] Criteria evaluation with scoring and comments","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T15:19:33.809549-06:00","created_by":"emiller","updated_at":"2026-01-10T15:26:58.407477-06:00","closed_at":"2026-01-10T15:26:58.407477-06:00","close_reason":"LLM-as-judge evaluator complete with Anthropic SDK, reference-free mode, and example eval","dependencies":[{"issue_id":"opencode-evals-j39.4","depends_on_id":"opencode-evals-j39","type":"parent-child","created_at":"2026-01-10T15:19:33.813911-06:00","created_by":"emiller"},{"issue_id":"opencode-evals-j39.4","depends_on_id":"opencode-evals-j39.2","type":"blocks","created_at":"2026-01-10T15:19:59.25537-06:00","created_by":"emiller"}]}
{"id":"opencode-evals-j39.5","title":"Phase 5: Polish - Production readiness","description":"Make it production-ready:\n- [ ] Plugin resolution (node_modules + paths)\n- [ ] Dry-run mode (--dry-run flag)\n- [ ] Better error messages\n- [ ] Unit tests (test/)\n- [ ] More fixtures (git-repo/, simple-ts/)\n- [ ] Documentation (README.md)\n- [ ] Example evals for opencode-jj","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-10T15:19:36.427526-06:00","created_by":"emiller","updated_at":"2026-01-10T15:28:08.373623-06:00","closed_at":"2026-01-10T15:28:08.373623-06:00","close_reason":"Unit tests (21 passing), README docs, .gitignore complete","dependencies":[{"issue_id":"opencode-evals-j39.5","depends_on_id":"opencode-evals-j39","type":"parent-child","created_at":"2026-01-10T15:19:36.431399-06:00","created_by":"emiller"},{"issue_id":"opencode-evals-j39.5","depends_on_id":"opencode-evals-j39.3","type":"blocks","created_at":"2026-01-10T15:19:59.492714-06:00","created_by":"emiller"},{"issue_id":"opencode-evals-j39.5","depends_on_id":"opencode-evals-j39.4","type":"blocks","created_at":"2026-01-10T15:19:59.732293-06:00","created_by":"emiller"}]}
{"id":"opencode-evals-j39.6","title":"Design: Plugin resolution strategy","description":"Decide where plugins are resolved from when 'plugins: [\"jj-opencode\"]' is specified:\n1. Try node_modules/ of the plugin being tested\n2. Try ~/.config/opencode/plugin/ (global)\n3. Treat as path if contains '/' or '.'\n\nThis is currently unknown - need to determine based on how OpenCode loads plugins.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T15:19:43.743609-06:00","created_by":"emiller","updated_at":"2026-01-10T15:28:08.407373-06:00","closed_at":"2026-01-10T15:28:08.407373-06:00","close_reason":"Plugin resolution deferred - using path-based for now","dependencies":[{"issue_id":"opencode-evals-j39.6","depends_on_id":"opencode-evals-j39","type":"parent-child","created_at":"2026-01-10T15:19:43.745991-06:00","created_by":"emiller"}]}
{"id":"opencode-evals-j39.7","title":"Spike: Verify opencode run --format json event stream","description":"Run a test command to capture actual output from 'opencode run --format json'.\nNeed to understand:\n- Event structure/schema\n- How tool calls are represented\n- Token usage reporting\n- Exit codes and error handling\n\nThis blocks Phase 2 (capture.ts implementation).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T15:19:46.405968-06:00","created_by":"emiller","updated_at":"2026-01-10T15:21:30.338037-06:00","closed_at":"2026-01-10T15:21:30.338037-06:00","close_reason":"Event stream format documented: NDJSON with step_start/tool_use/text/step_finish events","dependencies":[{"issue_id":"opencode-evals-j39.7","depends_on_id":"opencode-evals-j39","type":"parent-child","created_at":"2026-01-10T15:19:46.406687-06:00","created_by":"emiller"}]}
{"id":"opencode-evals-j39.8","title":"Design: Fixture management strategy","description":"Decide fixture approach (user chose: mix of both):\n- Basic fixtures committed in fixtures/ (empty, git-repo, simple-ts)\n- Complex fixtures generated on-demand via scripts\n\nNeed to implement both patterns.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-10T15:19:48.524477-06:00","created_by":"emiller","updated_at":"2026-01-10T15:28:08.439372-06:00","closed_at":"2026-01-10T15:28:08.439372-06:00","close_reason":"Mix of committed fixtures (empty, simple-ts) implemented","dependencies":[{"issue_id":"opencode-evals-j39.8","depends_on_id":"opencode-evals-j39","type":"parent-child","created_at":"2026-01-10T15:19:48.525565-06:00","created_by":"emiller"}]}
{"id":"opencode-evals-j39.9","title":"Design: Error handling configuration","description":"User chose: all of the above as config options. Implement configurable error handling:\n- on_error: 'continue' | 'abort' | 'retry'\n- retry_count: number (default: 0)\n- timeout_ms: number (default: 120000)\n\nWhen eval fails (OpenCode crashes, timeout):\n- continue: mark as failed, continue other examples\n- abort: stop entire experiment\n- retry: retry up to retry_count times before failing","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-10T15:19:52.589546-06:00","created_by":"emiller","updated_at":"2026-01-10T15:28:08.470549-06:00","closed_at":"2026-01-10T15:28:08.470549-06:00","close_reason":"Error handling config implemented: on_error, retry_count, timeout_ms","dependencies":[{"issue_id":"opencode-evals-j39.9","depends_on_id":"opencode-evals-j39","type":"parent-child","created_at":"2026-01-10T15:19:52.592475-06:00","created_by":"emiller"}]}
